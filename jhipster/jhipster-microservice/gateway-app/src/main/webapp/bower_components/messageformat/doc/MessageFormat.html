<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <title>JSDoc: Class: MessageFormat</title>

    <script src="scripts/prettify/prettify.js"> </script>
    <script src="scripts/prettify/lang-css.js"> </script>
    <!--[if lt IE 9]>
      <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
    <link type="text/css" rel="stylesheet" href="styles/prettify-tomorrow.css">
    <link type="text/css" rel="stylesheet" href="styles/jsdoc-default.css">
</head>

<body>

<div id="main">

    <h1 class="page-title">Class: MessageFormat</h1>

    




<section>

<header>
    
        <h2>MessageFormat</h2>
        
    
</header>

<article>
    <div class="container-overview">
    
        

    

    <h4 class="name" id="MessageFormat"><span class="type-signature"></span>new MessageFormat<span class="signature">(locale<span class="signature-attributes">opt</span>, pluralFunc<span class="signature-attributes">opt</span>, formatters<span class="signature-attributes">opt</span>)</span><span class="type-signature"></span></h4>

    



<div class="description">
    <p>Create a new message formatter</p>
</div>









    <h5>Parameters:</h5>
    

<table class="params">
    <thead>
    <tr>
        
        <th>Name</th>
        

        <th>Type</th>

        
        <th>Attributes</th>
        

        
        <th>Default</th>
        

        <th class="last">Description</th>
    </tr>
    </thead>

    <tbody>
    

        <tr>
            
                <td class="name"><code>locale</code></td>
            

            <td class="type">
            
                
<span class="param-type">string</span>
|

<span class="param-type">Array.&lt;string></span>


            
            </td>

            
                <td class="attributes">
                
                    &lt;optional><br>
                

                

                
                </td>
            

            
                <td class="default">
                
                    "en"
                
                </td>
            

            <td class="description last"><p>The locale to use, with fallbacks</p></td>
        </tr>

    

        <tr>
            
                <td class="name"><code>pluralFunc</code></td>
            

            <td class="type">
            
                
<span class="param-type">function</span>


            
            </td>

            
                <td class="attributes">
                
                    &lt;optional><br>
                

                

                
                </td>
            

            
                <td class="default">
                
                </td>
            

            <td class="description last"><p>Optional custom pluralization function</p></td>
        </tr>

    

        <tr>
            
                <td class="name"><code>formatters</code></td>
            

            <td class="type">
            
                
<span class="param-type">Array.&lt;function()></span>


            
            </td>

            
                <td class="attributes">
                
                    &lt;optional><br>
                

                

                
                </td>
            

            
                <td class="default">
                
                </td>
            

            <td class="description last"><p>Optional custom formatting functions</p></td>
        </tr>

    
    </tbody>
</table>






<dl class="details">

    

    

    

    

    

    

    

    

    

    

    

    

    
    <dt class="tag-source">Source:</dt>
    <dd class="tag-source"><ul class="dummy"><li>
        <a href="messageformat.js.html">messageformat.js</a>, <a href="messageformat.js.html#line51">line 51</a>
    </li></ul></dd>
    

    

    

    
</dl>
















    
    </div>

    

    

    

     

    
        <h3 class="subsection-title">Namespaces</h3>

        <dl>
            <dt><a href="MessageFormat.formatters.html">formatters</a></dt>
            <dd></dd>
        </dl>
    

    
        <h3 class="subsection-title">Members</h3>

        
            
<h4 class="name" id=".plurals"><span class="type-signature">(static) </span>plurals<span class="type-signature"> :Object.&lt;string, function()></span></h4>




<div class="description">
    <p>Pluralization functions from
 <a href="http://github.com/eemeli/make-plural.js">make-plural</a></p>
</div>



    <h5>Type:</h5>
    <ul>
        <li>
            
<span class="param-type">Object.&lt;string, function()></span>


        </li>
    </ul>





<dl class="details">

    

    

    

    

    

    

    

    

    

    

    

    

    
    <dt class="tag-source">Source:</dt>
    <dd class="tag-source"><ul class="dummy"><li>
        <a href="messageformat.js.html">messageformat.js</a>, <a href="messageformat.js.html#line89">line 89</a>
    </li></ul></dd>
    

    

    

    
</dl>






        
    

    
        <h3 class="subsection-title">Methods</h3>

        
            

    

    <h4 class="name" id="compile"><span class="type-signature"></span>compile<span class="signature">(messages, opt<span class="signature-attributes">opt</span>)</span><span class="type-signature"> &rarr; {function}</span></h4>

    



<div class="description">
    <p>Compile messages into an executable function with clean string
 representation.</p>
<p> If <code>messages</code> is a single string including ICU MessageFormat declarations,
 <code>opt</code> is ignored and the returned function takes a single Object parameter
 <code>d</code> representing each of the input's defined variables. The returned
 function will be defined in a local scope that includes all the required
 runtime variables.</p>
<p> If <code>messages</code> is a map of keys to strings, or a map of namespace keys to
 such key/string maps, the returned function will fill the specified global
 with javascript functions matching the structure of the input. In such use,
 the result of <code>compile()</code> may be serialized using its <code>toString()</code> method,
 including all required runtime function definitions. If <code>opt.global</code> is
 null, calling the output function will return the object itself.</p>
<p> Together, the input parameters should match the following patterns:</p>
<pre class="prettyprint source lang-js"><code> messages = &quot;string&quot; || { key0: &quot;string0&quot;, key1: &quot;string1&quot;, ... } || {
   ns0: { key0: &quot;string0&quot;, key1: &quot;string1&quot;, ...  },
   ns1: { key0: &quot;string0&quot;, key1: &quot;string1&quot;, ...  },
   ...
 }

 opt = null || {
   locale: null || {
     ns0: &quot;lc0&quot; || [ &quot;lc0&quot;, ... ],
     ns1: &quot;lc1&quot; || [ &quot;lc1&quot;, ... ],
     ...
   },
   global: null || &quot;module.exports&quot; || &quot;exports&quot; || &quot;i18n&quot; || ...
 }</code></pre>
</div>









    <h5>Parameters:</h5>
    

<table class="params">
    <thead>
    <tr>
        
        <th>Name</th>
        

        <th>Type</th>

        
        <th>Attributes</th>
        

        
        <th>Default</th>
        

        <th class="last">Description</th>
    </tr>
    </thead>

    <tbody>
    

        <tr>
            
                <td class="name"><code>messages</code></td>
            

            <td class="type">
            
                
<span class="param-type">string</span>
|

<span class="param-type">Object</span>


            
            </td>

            
                <td class="attributes">
                

                

                
                </td>
            

            
                <td class="default">
                
                </td>
            

            <td class="description last"><p>The input message(s) to be compiled, in ICU MessageFormat</p></td>
        </tr>

    

        <tr>
            
                <td class="name"><code>opt</code></td>
            

            <td class="type">
            
                
<span class="param-type">Object</span>


            
            </td>

            
                <td class="attributes">
                
                    &lt;optional><br>
                

                

                
                </td>
            

            
                <td class="default">
                
                    {}
                
                </td>
            

            <td class="description last"><p>Options controlling output for non-simple intput</p>
                <h6>Properties</h6>
                

<table class="params">
    <thead>
    <tr>
        
        <th>Name</th>
        

        <th>Type</th>

        
        <th>Attributes</th>
        

        
        <th>Default</th>
        

        <th class="last">Description</th>
    </tr>
    </thead>

    <tbody>
    

        <tr>
            
                <td class="name"><code>locale</code></td>
            

            <td class="type">
            
                
<span class="param-type">Object</span>


            
            </td>

            
                <td class="attributes">
                
                    &lt;optional><br>
                

                

                
                </td>
            

            
                <td class="default">
                
                </td>
            

            <td class="description last"><p>The locales to use for the messages, with a
    structure matching that of <code>messages</code></p></td>
        </tr>

    

        <tr>
            
                <td class="name"><code>global</code></td>
            

            <td class="type">
            
                
<span class="param-type">string</span>


            
            </td>

            
                <td class="attributes">
                
                    &lt;optional><br>
                

                

                
                </td>
            

            
                <td class="default">
                
                    ""
                
                </td>
            

            <td class="description last"><p>The global variable that the output
    function should use, or a null string for none. &quot;exports&quot; and
    &quot;module.exports&quot; are recognised as special cases.</p></td>
        </tr>

    
    </tbody>
</table>

            </td>
        </tr>

    
    </tbody>
</table>






<dl class="details">

    

    

    

    

    

    

    

    

    

    

    

    

    
    <dt class="tag-source">Source:</dt>
    <dd class="tag-source"><ul class="dummy"><li>
        <a href="messageformat.js.html">messageformat.js</a>, <a href="messageformat.js.html#line499">line 499</a>
    </li></ul></dd>
    

    

    

    
</dl>













<h5>Returns:</h5>

        
<div class="param-desc">
    <p>The first match found for the given locale(s)</p>
</div>



<dl>
    <dt>
        Type
    </dt>
    <dd>
        
<span class="param-type">function</span>


    </dd>
</dl>

    


    <h5>Examples</h5>
    
    <pre class="prettyprint"><code>var mf = new MessageFormat('en');
var cf = mf.compile('A {TYPE} example.');

cf({ TYPE: 'simple' })
// 'A simple example.'

cf.toString()
// 'function (d) { return "A " + d.TYPE + " example."; }'</code></pre>

    <pre class="prettyprint"><code>var fs = require('fs');
var mf = new MessageFormat('en');
var msgSet = {
  a: 'A {TYPE} example.',
  b: 'This has {COUNT, plural, one{one member} other{# members}}.'
};
var cfSet = mf.compile(msgSet, { global: 'module.exports' });
var str = cfSet.toString().replace(/^[^{]*{/, '').replace(/}\s*$/, '').trim();
fs.writeFileSync('messages.js', str);
...
var messages = require('./messages');

messages.a({ TYPE: 'more complex' })
// 'A more complex example.'

messages.b({ COUNT: 2 })
// 'This has 2 members.'</code></pre>

    <pre class="prettyprint"><code>var mf = new MessageFormat('en');
mf.runtime.pluralFuncs.fi = MessageFormat.plurals.fi;
mf.compile({
  en: { a: 'A {TYPE} example.',
        b: 'This is the {COUNT, selectordinal, one{#st} two{#nd} few{#rd} other{#th}} example.' },
  fi: { a: '{TYPE} esimerkki.',
        b: 'Tämä on {COUNT, selectordinal, other{#.}} esimerkki.' }
}, {
  locale: { en: 'en', fi: 'fi' },
  global: 'i18n'
})(this);

i18n.en.b({ COUNT: 3 })
// 'This is the 3rd example.'

i18n.fi.b({ COUNT: 3 })
// 'Tämä on 3. esimerkki.'</code></pre>



        
            

    

    <h4 class="name" id="setBiDiSupport"><span class="type-signature"></span>setBiDiSupport<span class="signature">(enable<span class="signature-attributes">opt</span>)</span><span class="type-signature"> &rarr; {<a href="MessageFormat.html">MessageFormat</a>}</span></h4>

    



<div class="description">
    <p>Enable or disable the addition of Unicode control characters to all input
 to preserve the integrity of the output when mixing LTR and RTL text.</p>
</div>









    <h5>Parameters:</h5>
    

<table class="params">
    <thead>
    <tr>
        
        <th>Name</th>
        

        <th>Type</th>

        
        <th>Attributes</th>
        

        
        <th>Default</th>
        

        <th class="last">Description</th>
    </tr>
    </thead>

    <tbody>
    

        <tr>
            
                <td class="name"><code>enable</code></td>
            

            <td class="type">
            
                
<span class="param-type">boolean</span>


            
            </td>

            
                <td class="attributes">
                
                    &lt;optional><br>
                

                

                
                </td>
            

            
                <td class="default">
                
                    true
                
                </td>
            

            <td class="description last"></td>
        </tr>

    
    </tbody>
</table>






<dl class="details">

    

    

    

    

    

    

    

    

    

    

    

    

    
    <dt class="tag-source">Source:</dt>
    <dd class="tag-source"><ul class="dummy"><li>
        <a href="messageformat.js.html">messageformat.js</a>, <a href="messageformat.js.html#line174">line 174</a>
    </li></ul></dd>
    

    

    
    <dt class="tag-see">See:</dt>
    <dd class="tag-see">
        <ul>
            <li><a href="http://cldr.unicode.org/development/development-process/design-proposals/bidi-handling-of-structured-text">http://cldr.unicode.org/development/development-process/design-proposals/bidi-handling-of-structured-text</a></li>
        </ul>
    </dd>
    

    
</dl>













<h5>Returns:</h5>

        
<div class="param-desc">
    <p>The MessageFormat instance, to allow for chaining</p>
</div>



<dl>
    <dt>
        Type
    </dt>
    <dd>
        
<span class="param-type"><a href="MessageFormat.html">MessageFormat</a></span>


    </dd>
</dl>

    


    <h5>Example</h5>
    
    <pre class="prettyprint"><code>// upper case stands for RTL characters, output is shown as rendered
var mf = new MessageFormat('en');

mf.compile('{0} >> {1} >> {2}')(['first', 'SECOND', 'THIRD']);
// 'first >> THIRD &lt;&lt; SECOND'

mf.setBiDiSupport(true);
mf.compile('{0} >> {1} >> {2}')(['first', 'SECOND', 'THIRD']);
// 'first >> SECOND >> THIRD'</code></pre>



        
            

    

    <h4 class="name" id="setIntlSupport"><span class="type-signature"></span>setIntlSupport<span class="signature">(enable<span class="signature-attributes">opt</span>)</span><span class="type-signature"> &rarr; {<a href="MessageFormat.html">MessageFormat</a>}</span></h4>

    



<div class="description">
    <p>Enable or disable support for the default formatters, which require the
 <code>Intl</code> object. Note that this can't be autodetected, as the environment
 in which the formatted text is compiled into Javascript functions is not
 necessarily the same environment in which they will get executed.</p>
</div>









    <h5>Parameters:</h5>
    

<table class="params">
    <thead>
    <tr>
        
        <th>Name</th>
        

        <th>Type</th>

        
        <th>Attributes</th>
        

        
        <th>Default</th>
        

        <th class="last">Description</th>
    </tr>
    </thead>

    <tbody>
    

        <tr>
            
                <td class="name"><code>enable</code></td>
            

            <td class="type">
            
                
<span class="param-type">boolean</span>


            
            </td>

            
                <td class="attributes">
                
                    &lt;optional><br>
                

                

                
                </td>
            

            
                <td class="default">
                
                    true
                
                </td>
            

            <td class="description last"></td>
        </tr>

    
    </tbody>
</table>






<dl class="details">

    

    

    

    

    

    

    

    

    

    

    

    

    
    <dt class="tag-source">Source:</dt>
    <dd class="tag-source"><ul class="dummy"><li>
        <a href="messageformat.js.html">messageformat.js</a>, <a href="messageformat.js.html#line199">line 199</a>
    </li></ul></dd>
    

    

    
    <dt class="tag-see">See:</dt>
    <dd class="tag-see">
        <ul>
            <li><a href="MessageFormat.formatters.html">MessageFormat.formatters</a></li>
        </ul>
    </dd>
    

    
</dl>













<h5>Returns:</h5>

        
<div class="param-desc">
    <p>The MessageFormat instance, to allow for chaining</p>
</div>



<dl>
    <dt>
        Type
    </dt>
    <dd>
        
<span class="param-type"><a href="MessageFormat.html">MessageFormat</a></span>


    </dd>
</dl>

    


    <h5>Example</h5>
    
    <pre class="prettyprint"><code>// Intl is not defined in default Node until 0.11.15 / 0.12.0
var Intl = require('intl');
var mf = new MessageFormat('en').setIntlSupport(true);
mf.currency = 'EUR';

mf.compile('The total is {V,number,currency}.')({ V: 5.5 });
// 'The total is €5.50.'</code></pre>



        
    

    

    
</article>

</section>




</div>

<nav>
    <h2><a href="index.html">Home</a></h2><h3>Classes</h3><ul><li><a href="MessageFormat.html">MessageFormat</a></li><li><a href="Runtime.html">Runtime</a></li></ul><h3>Namespaces</h3><ul><li><a href="MessageFormat.formatters.html">formatters</a></li></ul>
</nav>

<br class="clear">

<footer>
    Documentation generated by <a href="https://github.com/jsdoc3/jsdoc">JSDoc 3.4.0</a> on Sat Feb 20 2016 18:21:44 GMT+0200 (EET)
</footer>

<script> prettyPrint(); </script>
<script src="scripts/linenumber.js"> </script>
</body>
</html>